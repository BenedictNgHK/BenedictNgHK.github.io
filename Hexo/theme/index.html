<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Add Google Analytics &amp; Disqus to Theme | Benedict's Blog</title><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/highlights/rainbow.css"><link rel="canonical" href="https://benedictnghk.github.io/Hexo/theme/"/>
<meta name="description" content="Since many themes were developed for years then their maintenance has stopped, so the plug-in google analytics &amp; disqus code may…">
<meta property="og:type" content="article">
<meta property="og:title" content="Add Google Analytics &amp; Disqus to Theme">
<meta property="og:url" content="https://benedictnghk.github.io/Hexo/theme/">
<meta property="og:site_name" content="Benedict&#39;s Blog">
<meta property="og:description" content="Since many themes were developed for years then their maintenance has stopped, so the plug-in google analytics &amp; disqus code may…">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://benedictnghk.github.io/images/default.jpg">
<meta property="article:published_time" content="2024-09-05T01:06:55.793Z">
<meta property="article:modified_time" content="2024-09-05T01:06:55.793Z">
<meta property="article:author" content="Benedict Ng">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://benedictnghk.github.io/images/default.jpg"><meta property="article:author" content="https://www.facebook.com/BenedictNgYuzeWu"><meta property="twitter:label1" content="Published at"><meta property="twitter:data1" content="2024-09-05 09:06:55"><meta property="twitter:label2" content="Written by"><meta property="twitter:data2" content="Benedict Ng"><link rel="icon" href="/images/icon.png"><script async src="https://www.googletagmanager.com/gtag/js?id=G-3WGY09S1RR"></script><script><!-- Google tag (gtag.js) -->
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-3WGY09S1RR');</script><meta name="generator" content="Hexo 7.3.0"></head><body itemscope itemtype="https://schema.org/WebPage"><nav class="menu" id="menu"><div class="menu-inner"><div class="menu__left-area"><div class="menu__item"><a class="menu__item__link menu__item__link--brand" href="/" title="Home" rel="home"><img class="menu__item__link--brand__image" src="/images/icon.png" alt="Benedict's Blog"><span class="menu__item__link--brand__label">Benedict's Blog</span></a></div></div><div class="menu__right-area"><div class="menu__item"><a class="menu__item__link" href="/">Posts</a></div><div class="menu__item"><a class="menu__item__link" href="/sitemap/">Sitemap</a></div><div class="menu__item"><a class="menu__item__link" href="/repo/">Repo</a></div><div class="menu__item"><a class="menu__item__link" target="_blank" rel="noopener" href="https://github.com/BenedictNgHK">Github</a></div><div class="menu__item"><a class="menu__item__link" href="mailto:yuzewuchina@outlook.com">Email</a></div><div class="menu__item"><a class="menu__item__link" href="/friendlinks/">Friend Links</a></div></div></div></nav><div class="page-background"></div><div class="content-container"><div class="content-outer"><div class="content-inner" itemscope itemtype="https://schema.org/Blog"><article class="article" id="article" itemscope itemtype="https://schema.org/BlogPosting"><h1 class="article__title" itemprop="headline">Add Google Analytics &amp; Disqus to Theme</h1><div class="article__meta"><time class="article__meta__time" datetime="2024-09-05T01:06:55.793Z" itemprop="datePublished">2024-09-05 09:06:55</time><div class="article__meta__categories"><a class="article__meta__categories__item" href="/categories/Hexo/">Hexo</a></div></div><hr><div class="article__contents"><p>Since many themes were developed for years then their maintenance has stopped, so the plug-in google analytics &amp; disqus code may invalidate. My theme <a target="_blank" rel="noopener" href="https://github.com/HyunSeob/hexo-theme-overdose">overdose</a> is a great example. I like its UI design but some parts of its code is obsolete. This post only shows how to modify the overdose theme, because for other themes the files are different. You have to find the correct files of your theme. Let’s assume the root directory is your theme directory.</p>
<h2 id="Add-Google-Analytics"><a href="#Add-Google-Analytics" class="headerlink" title="Add Google Analytics"></a>Add Google Analytics</h2><p>Modify the code in &#x2F;layout&#x2F;includes&#x2F;head.pug, and find the snippet of code of google analytics, replace it to:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if theme.google_analytics</span><br><span class="line">  script(async src=&#x27;https://www.googletagmanager.com/gtag/js?id=&#x27; + theme.google_analytics)</span><br><span class="line">  script. </span><br><span class="line">    &lt;!-- Google tag (gtag.js) --&gt;</span><br><span class="line">    window.dataLayer = window.dataLayer || [];</span><br><span class="line">    function gtag()&#123;dataLayer.push(arguments);&#125;</span><br><span class="line">    gtag(&#x27;js&#x27;, new Date());</span><br><span class="line">    gtag(&#x27;config&#x27;, &#x27;#&#123;theme.google_analytics&#125;&#x27;);</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<p>Then add your measurement id in _config.yml.</p>
<h2 id="Add-Disqus"><a href="#Add-Disqus" class="headerlink" title="Add Disqus"></a>Add Disqus</h2><p>Modify the code in &#x2F;layout&#x2F;includes&#x2F;article.pug. The url should be different, you can find it on your disqus account. In my case, it is:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if config.disqus_shortname</span><br><span class="line">  #disqus_thread</span><br><span class="line">  script.</span><br><span class="line">    (function() &#123; // DON&#x27;T EDIT BELOW THIS LINE</span><br><span class="line">    var d = document, s = d.createElement(&#x27;script&#x27;);</span><br><span class="line">    s.src = &#x27;https://https-benedictnghk-github-io.disqus.com/embed.js&#x27;;</span><br><span class="line">    s.setAttribute(&#x27;data-timestamp&#x27;, +new Date());</span><br><span class="line">    (d.head || d.body).appendChild(s);</span><br><span class="line">    &#125;)();</span><br><span class="line">  noscript Enable JavaScript to see comments.</span><br></pre></td></tr></table></figure></div><div class="article__author" itemscope itemprop="author" itemtype="https://schema.org/Person"><img class="article__author__image" src="/images/avatar.jpg" alt="Benedict Ng"><a class="article__author__link" title="About Benedict Ng" rel="author">Benedict Ng</a><p class="article__author__desc">Social Media</p><div class="article__author__socials"><a class="article__author__socials__item" href="https://github.com/BenedictNgHK" title="github" target="_blank"><i class="fa fa-github"></i></a><a class="article__author__socials__item" href="https://www.facebook.com/BenedictNgYuzeWu" title="facebook" target="_blank"><i class="fa fa-facebook"></i></a><a class="article__author__socials__item" href="https://www.linkedin.com/in/yuze-wu-a100011ba" title="linkedin" target="_blank"><i class="fa fa-linkedin"></i></a></div><meta itemprop="name" content="Benedict Ng"></div><div class="sharer" id="sharer"><div class="sharer-inner"><div class="sharer__right"><button class="sharer__item" id="sharer-facebook"><i class="fa fa-facebook-official"></i></button><button class="sharer__item" id="sharer-twitter"><i class="fa fa-twitter"></i></button><button class="sharer__item" id="sharer-pinterest"><i class="fa fa-pinterest"></i></button><button class="sharer__item" id="sharer-pocket"><i class="fa fa-get-pocket"></i></button></div></div></div><!-- Disqus Code--><div id="disqus_thread"></div><script>(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://https-benedictnghk-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script><noscript>Enable JavaScript to see comments.</noscript><!-- Meta Tags for Structured Data--><meta itemprop="dateModified" content="2024-09-05T01:06:55.793Z"><meta itemprop="articleBody" content="Since many themes were developed for years then their maintenance has stopped, so the plug-in google analytics &amp;amp; disqus code may invalidate. My theme overdose is a great example. I like its UI..."><meta itemprop="url" content="https://benedictnghk.github.io/Hexo/theme/"><meta itemprop="mainEntityOfPage" content="https://benedictnghk.github.io/Hexo/theme/"><div itemscope itemtype="https://schema.org/Organization" itemprop="publisher"><meta itemprop="name" content="Benedict's Blog"><div itemscope itemprop="logo" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://benedictnghk.github.io/images/icon.png"></div></div><div itemscope itemtype="https://schema.org/ImageObject" itemprop="image"><meta itemprop="contentUrl" content="https://benedictnghk.github.io/images/default.jpg"><meta itemprop="url" content="https://benedictnghk.github.io/images/default.jpg"><meta itemprop="width" content="1280"><meta itemprop="height" content="720"></div></article></div></div></div><footer id="footer"><div class="widgets"><div class="widgets-inner"><!-- Jade doesn't support dynamic inclusion with `each`.--><!-- So, I just hard coded the file names that will be included.--><div class="widgets__item"><h3 class="widgets__item__heading">Recent posts</h3><ul class="recent-posts"><li class="recent-posts__item"><a href="/Hexo/theme/">Add Google Analytics &amp; Disqus to Theme</a></li><li class="recent-posts__item"><a href="/PWN/GDB/">GDB Debugger</a></li><li class="recent-posts__item"><a href="/PWN/Shellcode/">Shellcode</a></li><li class="recent-posts__item"><a href="/Uncategorized/VLAN/">VLAN</a></li><li class="recent-posts__item"><a href="/PWN/Endianness/">Endianness</a></li></ul></div><div class="widgets__item"><h3 class="widgets__item__heading">Categories</h3><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LeetCode/">LeetCode</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Operation-System/">OS</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PWN/">PWN</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/PWN/Theory/">Theory</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PWN/Tools/">Tools</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Uncategorized/">Uncategorized</a><span class="category-list-count">1</span></li></ul></div></div></div><p class="copyright"><small>© 2024 Benedict Ng<br>Powered by <a href="https://hexo.io" rel="external" target="_blank">Hexo</a>, Theme by <a href="https://github.com/hyunseob" rel="external" target="_blank">HyunSeob</a></small></p></footer><!--[if lt IE 10]><script src="/js/classList.min.js"></script><![endif]--><script src="/js/index.min.js"></script></body></html>